<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Times-4 Action Hero</title>
    <style>
        :root {
            --primary: #4a90e2; --success: #48bb78; --error: #f56565; --dark: #2d3748;
            --bg: #cbd5e0;
        }

        body {
            font-family: 'Courier New', Courier, monospace;
            display: flex; justify-content: center; align-items: center;
            min-height: 100vh; margin: 0; background-color: var(--bg);
        }

        #game-container {
            background: white; padding: 2rem; border: 4px solid #000;
            box-shadow: 10px 10px 0px rgba(0,0,0,0.2); text-align: center; width: 350px;
            position: relative;
        }

        /* --- ANIMATIONS --- */
        @keyframes jump-dance {
            0%, 100% { transform: translateY(0) rotate(0); }
            25% { transform: translateY(-15px) rotate(-5deg); }
            50% { transform: translateY(0) rotate(0); }
            75% { transform: translateY(-15px) rotate(5deg); }
        }

        @keyframes face-plant {
            0% { transform: rotate(0); }
            20% { transform: rotate(-10deg); } /* Wobbly knees */
            100% { transform: rotate(90deg) translateY(10px); opacity: 0.6; }
        }

        .dancing { animation: jump-dance 0.4s ease infinite; }
        .falling { transform-origin: bottom center; animation: face-plant 0.5s ease forwards; }
        
        /* --- AVATAR & UI --- */
        .avatar-box { height: 120px; display: flex; justify-content: center; align-items: flex-end; overflow: visible; margin-bottom: 10px; }
        .pixel-art { shape-rendering: crispEdges; }

        .controls { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin: 15px 0; text-align: left; }
        select { width: 100%; padding: 5px; border: 2px solid #000; font-family: inherit; background: #eee; cursor: pointer; }
        label { font-size: 0.8rem; font-weight: bold; }

        .question { font-size: 3rem; font-weight: bold; margin: 10px 0; color: var(--primary); }
        
        input { 
            width: 100px; font-size: 2rem; padding: 5px; text-align: center; 
            border: 3px solid #000; outline: none; font-family: inherit;
        }
        
        button { 
            display: block; width: 100%; margin-top: 15px; padding: 12px; 
            background: var(--dark); color: white; border: 3px solid #000; 
            font-size: 1.2rem; cursor: pointer; font-family: inherit;
            transition: transform 0.1s;
        }
        button:active { transform: translateY(2px); }

        .hidden { display: none; }
        #feedback { margin-top: 15px; font-weight: bold; height: 24px; font-size: 1.1rem; }
    </style>
</head>
<body>

<div id="game-container">
    
    <div id="setup-screen">
        <h2 style="margin-top:0">HERO MAKER</h2>
        <div class="avatar-box" id="preview-area"></div>
        
        <div class="controls">
            <div>
                <label>HAIR</label>
                <select id="hair-select" onchange="updatePreview()">
                    <option value="#4a2e2a">Brown Buzz</option>
                    <option value="#f6e05e">Blonde Mohawk</option>
                    <option value="#e53e3e">Red Spiky</option>
                    <option value="#ed64a6">Pink Bob</option>
                </select>
            </div>
            <div>
                <label>SHIRT</label>
                <select id="shirt-select" onchange="updatePreview()">
                    <option value="#3b82f6">Blue Hero</option>
                    <option value="#e53e3e">Red cape</option>
                    <option value="#48bb78">Green suit</option>
                    <option value="#805ad5">Purple robe</option>
                </select>
            </div>
            <div>
                <label>FACE</label>
                <select id="face-select" onchange="updatePreview()">
                    <option value="smile">Happy</option>
                    <option value="cool">Cool</option>
                    <option value="stoic">Serious</option>
                </select>
            </div>
            <div>
                <label>SKIN</label>
                <select id="skin-select" onchange="updatePreview()">
                    <option value="#ffdbac">Light</option>
                    <option value="#e0ac69">Medium</option>
                    <option value="#8d5524">Dark</option>
                </select>
            </div>
        </div>
        <button onclick="startGame()">START MISSION</button>
    </div>

    <div id="game-screen" class="hidden">
        <div class="avatar-box" id="game-avatar-container"></div>
        
        <div id="progress">Level 1 / 12</div>
        <div class="question" id="q-text">4 × ?</div>
        
        <input type="number" id="ans-input" placeholder="?" autocomplete="off">
        <button onclick="check()">ATTACK!</button>
        <div id="feedback"></div>
    </div>

    <div id="result-screen" class="hidden">
        <h2>MISSION REPORT</h2>
        <div class="avatar-box" id="result-avatar-container"></div>
        <p id="final-score" style="font-size: 1.5rem;"></p>
        <button onclick="location.reload()">NEW HERO</button>
    </div>
</div>

<script>
    // Game State
    let questions = [];
    let currentIndex = 0;
    let score = 0;

    // --- AVATAR GENERATOR ---
    function getAvatarSVG(mood = 'normal') {
        const hairColor = document.getElementById('hair-select').value;
        const shirtColor = document.getElementById('shirt-select').value;
        const skinColor = document.getElementById('skin-select').value;
        const faceStyle = document.getElementById('face-select').value;

        // Base Body (8-bit blocks)
        let svgContent = `
            <rect x="25" y="80" width="50" height="20" fill="${shirtColor}" /> <rect x="30" y="30" width="40" height="50" fill="${skinColor}" /> <rect x="25" y="20" width="50" height="20" fill="${hairColor}" /> <rect x="25" y="20" width="10" height="50" fill="${hairColor}" /> <rect x="65" y="20" width="10" height="50" fill="${hairColor}" /> `;

        // Face Logic
        let eyes = '';
        let mouth = '';

        if (mood === 'dead') {
            // X Eyes for wrong answer
            eyes = `
                <text x="35" y="60" font-family="sans-serif" font-size="20" fill="black">X</text>
                <text x="55" y="60" font-family="sans-serif" font-size="20" fill="black">X</text>
            `;
            mouth = `<rect x="40" y="70" width="20" height="5" fill="black" />`;
        } else {
            // Normal Eyes
            if(faceStyle === 'cool') {
                eyes = `<rect x="30" y="45" width="40" height="10" fill="black" />`; // Sunglasses
            } else {
                eyes = `<rect x="35" y="45" width="8" height="8" fill="black" />
                        <rect x="57" y="45" width="8" height="8" fill="black" />`; // Dots
            }

            // Normal Mouth
            if(faceStyle === 'stoic') mouth = `<rect x="40" y="65" width="20" height="5" fill="black" />`;
            else mouth = `<rect x="35" y="65" width="30" height="5" fill="black" />
                          <rect x="35" y="65" width="5" height="2" fill="black" /> 
                          <rect x="60" y="65" width="5" height="2" fill="black" />`; // Smile
        }

        // Victory Sparkles
        if (mood === 'win') {
             svgContent += `
                <rect x="20" y="10" width="5" height="5" fill="#FFD700"><animate attributeName="opacity" values="0;1;0" dur="0.5s" repeatCount="indefinite"/></rect>
                <rect x="75" y="10" width="5" height="5" fill="#FFD700"><animate attributeName="opacity" values="0;1;0" dur="0.5s" begin="0.2s" repeatCount="indefinite"/></rect>
             `;
        }

        return `<svg id="avatar-svg" viewBox="0 0 100 100" width="100" height="100" class="pixel-art">${svgContent} ${eyes} ${mouth}</svg>`;
    }

    function updatePreview() {
        document.getElementById('preview-area').innerHTML = getAvatarSVG('normal');
    }

    // --- GAME LOGIC ---

    function startGame() {
        document.getElementById('setup-screen').classList.add('hidden');
        document.getElementById('game-screen').classList.remove('hidden');
        
        // Generate random questions 1-12
        questions = Array.from({length: 12}, (_, i) => i + 1).sort(() => Math.random() - 0.5);
        
        renderGameAvatar('normal');
        nextQuestion();
    }

    function renderGameAvatar(mood, animateClass = '') {
        const container = document.getElementById('game-avatar-container');
        container.innerHTML = getAvatarSVG(mood);
        if(animateClass) {
            container.querySelector('svg').classList.add(animateClass);
        }
    }

    function nextQuestion() {
        document.getElementById('progress').innerText = `Level ${currentIndex + 1} / 12`;
        document.getElementById('q-text').innerText = `4 × ${questions[currentIndex]}`;
        document.getElementById('ans-input').value = '';
        document.getElementById('ans-input').focus();
        document.getElementById('feedback').innerText = '';
        
        // Reset avatar to normal standing
        renderGameAvatar('normal');
    }

    function check() {
        const input = document.getElementById('ans-input');
        const feedback = document.getElementById('feedback');
        const val = parseInt(input.value);
        const correct = 4 * questions[currentIndex];

        if (isNaN(val)) return;

        if (val === correct) {
            score++;
            feedback.innerText = "CORRECT!";
            feedback.style.color = "var(--success)";
            // Win: Happy face + Dance animation
            renderGameAvatar('win', 'dancing');
        } else {
            feedback.innerText = `OUCH! It's ${correct}`;
            feedback.style.color = "var(--error)";
            // Loss: Dead face + Fall animation
            renderGameAvatar('dead', 'falling');
        }

        // Wait for animation then move on
        setTimeout(() => {
            currentIndex++;
            if (currentIndex < 12) {
                nextQuestion();
            } else {
                showResults();
            }
        }, 1500); // 1.5 seconds delay
    }

    function showResults() {
        document.getElementById('game-screen').classList.add('hidden');
        document.getElementById('result-screen').classList.remove('hidden');
        document.getElementById('final-score').innerText = `${score} / 12`;
        document.getElementById('result-avatar-container').innerHTML = getAvatarSVG('win');
    }

    // Init
    updatePreview();
    
    // Enter key support
    document.getElementById('ans-input').addEventListener('keypress', function (e) {
        if (e.key === 'Enter') check();
    });

</script>

</body>
</html>

```
